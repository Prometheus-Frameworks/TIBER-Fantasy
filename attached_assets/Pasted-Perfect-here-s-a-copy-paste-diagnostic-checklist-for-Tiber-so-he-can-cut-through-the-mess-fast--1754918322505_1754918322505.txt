Perfect — here’s a copy‑paste diagnostic checklist for Tiber so he can cut through the mess fast.

⸻

Prompt for Tiber — Player Data Cleanup (diagnostic + consolidation)

Objectives
	1.	Inventory every place players come from.
	2.	Prove which feeds are live vs stale.
	3.	Build one Player Pool (array + index).
	4.	Make all UI read from that pool.
	5.	Remove/disable duplicates.

⸻

0) Repo scan (10 min)

Find every player source, mapper, and fetch.

# endpoints
rg -n "/api/(redraft|dynasty|rookies|compass|trends|usage|player|players)" server client

# common shapes/mappers
rg -n "player_id|full_name|alias|compass|vorp|rank|adp" -g "!node_modules"

# shadow components/pages
rg -n "WRCompass|RedraftList|RankingsList|Rookie|Compass" client/src

Deliverable: a short table: file → purpose → keep/kill/migrate.

⸻

1) Live vs stale (prove it in 3 calls)

Add a one‑off script scripts/pingEndpoints.ts that fetches and logs row counts for:
	•	/api/redraft/rankings?pos=WR&limit=50
	•	/api/dynasty/value?pos=WR&limit=50
	•	/api/rookies?class=2025&pos=WR
	•	/api/compass/WR?limit=50 and /api/compass/wr?limit=50 (legacy)
	•	/api/usage/summary?season=2024&pos=WR
Print: endpoint → rows:N first:{id,name}

Deliverable: paste the console output. Tag each endpoint live/stale/empty.

⸻

2) Player Pool (single source of truth)

Files:
	•	data/player_pool.json  (array)
	•	data/player_index.json (map by id)

Builder scripts/buildPlayerPool.ts:
	•	Pull from live endpoints only (from step 1).
	•	Normalize → { id, name, team, pos, aliases[] }
	•	id = id||player_id||slug
	•	name = name||full_name||alias
	•	team = upper(team||nfl_team)
	•	pos = upper(pos||position)
	•	aliases = [id parts, name parts, alias] (lowercased)
	•	Dedupe by id; prefer redraft name/team if conflicts.
	•	Write both files. Log counts: QB/RB/WR/TE.
	•	Add a 5‑min cache or timestamp in meta.

New endpoint:

GET /api/player-pool?pos=&team=&search=&limit=200

	•	Filters on pos/team.
	•	search matches name|team|id|aliases (case-insensitive).
	•	Returns { ok, data, meta:{ rows, ts } }.

Deliverables: pool sizes by position; curl /api/player-pool?search=wadd shows Waddle.

⸻

3) Frontend: use the pool everywhere (minimal changes)
	•	Add api.playerPool({pos, team, search, limit}) + nameOf(id) that hits /api/player-pool or caches player_index.json on boot.
	•	Redraft hub: rankings still load via real endpoints, but search/autocomplete & name mapping come from player pool.
	•	Rookie pages: map player_id → nameOf(id) (never show raw IDs).
	•	Compass list: list pulls from player pool (even if compass scores are empty); clicking “View” can still go to compass detail.
	•	Remove any local fuzzy search code; rely on pool’s search.

Deliverables:
	•	/redraft search “Waddle” shows a row immediately.
	•	Rookie cards show names (no IDs).
	•	Compass list shows players even when compass data is empty.

⸻

4) Kill/disable duplicates (safely)
	•	Replace calls to legacy routes in UI (/api/compass/wr, /api/weekly, /api/rb-compass, TE‑specific rookies) with:
	•	pool for names/search
	•	namespaced endpoints for data (/api/redraft/*, /api/dynasty/*)
	•	Leave legacy server routes for 2 weeks but log a deprecation warning on hit.

Deliverable: list of removed imports/components and deprecation logs in server.

⸻

5) Health & visibility
	•	Extend /api/health with player_pool: "ok|stale|down" (stale if file older than 24h).
	•	Add a tiny dev footer on key pages: rows • pos • q • poolTs.

Deliverable: screenshot of /api/health + UI dev footer.

⸻

6) Acceptance checklist (must pass)
	•	curl /api/player-pool?pos=WR&search=wadd → returns Jaylen Waddle.
	•	/redraft?pos=WR renders ≥50 rows; “View” navigates.
	•	Searching “Waddle” on WR shows him; searching on ALL returns merged match.
	•	Rookie Spotlight: no raw IDs anywhere.
	•	Compass list: shows players (even if compass scores missing).
	•	/api/health shows player_pool: "ok".

⸻

Commit messages (use these)
	1.	chore(diag): inventory data sources and fetch paths
	2.	feat(scripts): buildPlayerPool from live endpoints (dedupe + aliases)
	3.	feat(api): /api/player-pool + index with search/filters
	4.	feat(client): api.playerPool() + nameOf(id) helper
	5.	refactor(ui): use player pool for search + name mapping across redraft/rookies/compass
	6.	chore(server): deprecate legacy endpoints with warnings
	7.	feat(health): add player_pool status; dev footer shows pool ts/rows

⸻

Joe’s only ask: ship visible wins — pool search works, IDs gone, lists populated. After that, we can tighten the rest.