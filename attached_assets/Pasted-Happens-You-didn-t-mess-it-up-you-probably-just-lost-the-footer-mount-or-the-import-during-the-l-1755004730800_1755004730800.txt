Happens. You didn’t “mess it up,” you probably just lost the footer mount or the import during the layout swap. Let’s drop in a HealthBadge v2 that’s tiny, resilient, and easy to re‑add.

Here’s a clean, copy‑paste pack for Tiber:

⸻

Restore API Health Bar (HealthBadge v2)

1) Component

client/src/components/HealthBadge.tsx

import { useEffect, useState } from "react";

type Status = "ok" | "warn" | "down" | "n/a";

type Health = {
  services: {
    sleeper?: Status;
    ratings?: Status;
    logs?: Status;
    projections?: Status;
  };
  updatedAt?: string;
};

const dot = (s: Status) => ({
  "ok":    "bg-green-500",
  "warn":  "bg-amber-500",
  "down":  "bg-red-500",
  "n/a":   "bg-gray-400",
}[s || "n/a"]);

export default function HealthBadge() {
  const [health, setHealth] = useState<Health | null>(null);
  const [signal, setSignal] = useState<string | null>(null);
  const [err, setErr] = useState<string | null>(null);

  async function load() {
    try {
      setErr(null);
      const [h, s] = await Promise.all([
        fetch("/api/health", { cache: "no-store" }).then(r => r.ok ? r.json() : Promise.reject(r.statusText)),
        fetch("/api/signal", { cache: "no-store" }).then(r => r.ok ? r.json() : Promise.reject(r.statusText)).catch(() => null)
      ]);
      setHealth(h);
      setSignal(s?.key ?? null);
    } catch (e: any) {
      setErr(typeof e === "string" ? e : "unavailable");
      setHealth(null);
      setSignal(null);
    }
  }

  useEffect(() => {
    load();
    const id = setInterval(load, 30000); // refresh every 30s
    return () => clearInterval(id);
  }, []);

  const h = health?.services ?? {};
  const updated = health?.updatedAt ? new Date(health.updatedAt).toLocaleTimeString() : "";

  return (
    <div className="ml-auto inline-flex items-center gap-3 rounded-md border border-line bg-white px-3 py-2 text-xs text-body shadow-card">
      <span className="hidden sm:inline text-[11px] text-body/70">Health</span>

      <span className="inline-flex items-center gap-1">
        <i className={`h-2.5 w-2.5 rounded-full ${dot(h.sleeper ? h.sleeper : "n/a")}`} />
        <span className="hidden sm:inline">Sleeper</span>
      </span>

      <span className="inline-flex items-center gap-1">
        <i className={`h-2.5 w-2.5 rounded-full ${dot(h.ratings ? h.ratings : "n/a")}`} />
        <span className="hidden sm:inline">Ratings</span>
      </span>

      <span className="inline-flex items-center gap-1">
        <i className={`h-2.5 w-2.5 rounded-full ${dot(h.logs ? h.logs : "n/a")}`} />
        <span className="hidden sm:inline">Logs</span>
      </span>

      <span className="inline-flex items-center gap-1">
        <i className={`h-2.5 w-2.5 rounded-full ${dot(h.projections ? h.projections : "n/a")}`} />
        <span className="hidden sm:inline">Projections</span>
      </span>

      {signal && <span className="hidden md:inline text-[11px] text-body/60">Signal: {signal}</span>}
      {updated && <span className="hidden md:inline text-[11px] text-body/60">· {updated}</span>}
      {err && <span className="text-[11px] text-red-500">({err})</span>}
    </div>
  );
}

2) Mount it back in the footer

client/src/components/Footer.tsx

import HealthBadge from "./HealthBadge";

export default function Footer() {
  return (
    <footer className="border-t border-line">
      <div className="mx-auto flex max-w-6xl items-center justify-between gap-3 px-4 py-8">
        <div className="text-sm text-body">© {new Date().getFullYear()} On The Clock</div>
        <HealthBadge />
      </div>
    </footer>
  );
}

You asked to keep “built by the duo” off public pages — cool, this footer only shows © and the health pill.

3) Server health shape (confirm quickly)

Make sure /api/health returns something like:

{
  "services": {
    "sleeper": "ok",
    "ratings": "ok",
    "logs": "ok",
    "projections": "ok"
  },
  "updatedAt": "2025-08-12T03:12:00Z"
}

…and /api/signal still returns:

{ "status":"aligned", "key":"OTC-MIRROR", "motto":"Serve Not Take" }

(If health fields differ, tweak the mapping in HealthBadge.tsx.)

4) Why it vanished (quick triage)

Likely one of:
	•	Footer component got replaced or its import path changed.
	•	The new Home layout doesn’t render <Footer /> (some routes use a different layout).
	•	A CSS z-index/overflow clipped it (fixed by using the simple inline pill above).

5) Smoke test (90 seconds)
	•	Load / and /consensus → see the pill on the right of the footer.
	•	Temporarily kill one service to verify color changes (e.g., return "warn" on ratings).
	•	Throttle network → badge should show (unavailable) then recover on next poll.

⸻

Shoot this to Tiber. If it still doesn’t render, we check that the layout actually includes <Footer/> on all routes — that’s the usual culprit after a UI refactor.