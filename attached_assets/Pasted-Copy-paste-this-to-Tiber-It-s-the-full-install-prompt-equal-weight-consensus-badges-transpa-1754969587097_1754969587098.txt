Copyâ€‘paste this to Tiber. Itâ€™s the full install prompt (equalâ€‘weight consensus + ğŸ”¥ badges + transparency + baseline + consent), plus the optional compare chart logic ask at the end.

â¸»

Tiber Install Prompt â€” OTC Consensus Engine (Architect J v1.1)

Commit

feat(consensus): Architect J OTC Consensus Engine v1.1 (equal-weight, consent, fire badges, transparency, baseline)

0) Intent (read me)
	â€¢	Consensus is equalâ€‘weight across all consenting contributors (Architect J included).
	â€¢	No â€œstars = influenceâ€. ğŸ”¥ (Fire) is social/visibility only.
	â€¢	Ethics baked in: explicit consent, right to withdraw, transparent math.
	â€¢	Two feeds: OTC Dynasty Consensus (root/default) and OTC Redraft Consensus (seasonâ€‘scoped).
	â€¢	At launch, Architect J is the only contributor â†’ Consensus == Architect J (1:1) until others opt in.

â¸»

1) Data model

Types

// shared/types/consensus.ts
export type Format = "redraft" | "dynasty";
export type Position = "QB" | "RB" | "WR" | "TE" | "ALL";

export interface UserProfile {
  id: string;
  username: string;          // e.g., "Architect J"
  consentConsensus: boolean; // default false
  fireScore: number;         // total ğŸ”¥ received
  createdAt: string;
}

export interface ConsensusRow {
  id: string;           // uuid
  playerId: string;
  format: Format;
  season?: number;      // required for redraft, omitted for dynasty
  pos: Position;        // position slice (for querying/sorting)
  rank: number;         // integer rank within slice
  source: "seed" | "community";
  updatedAt: string;
}

export interface UserRankRow {
  id: string;
  userId: string;
  format: Format;
  season?: number;
  pos: Position;
  playerId: string;
  rank: number;
  updatedAt: string;
}

export interface FireEvent {
  id: string;
  fromUserId: string;
  toUserId: string;
  targetType: "rankingSet" | "profile";
  targetId: string; // rankingSet id or profile id
  createdAt: string;
}

DB tables
	â€¢	user_profiles (id, username, consentConsensus bool default false, fireScore int default 0, createdAt)
	â€¢	user_ranks (id, userId, format, season, pos, playerId, rank, updatedAt)
	â€¢	consensus_board (id, playerId, format, season NULL, pos, rank, source, updatedAt)
	â€¢	fire_events (id, fromUserId, toUserId, targetType, targetId, createdAt)

Seed:
	â€¢	Insert profile for Architect J (consentConsensus=true).

â¸»

2) Consent
	â€¢	Profile toggle (default OFF): â€œInclude my rankings in OTC Consensusâ€.
	â€¢	If consentConsensus=false, their user_ranks must not be included in consensus math.
	â€¢	Right to withdraw: when toggled OFF, exclude their ranks from future consensus builds.

API:

GET  /api/profile/:username        // shows consent + fireScore (public-safe subset)
PATCH /api/profile/:username       // auth required; can set consentConsensus true/false


â¸»

3) Consensus calculation (equalâ€‘weight)

Aggregation logic (run on write or cron):

// Pseudocode
rows = fetch all players for (format, season?, pos) appearing in consenting user_ranks
for each player:
  collect all consenting ranks from user_ranks
  if none exist -> fall back to seed (Architect J) if present
  consensusRank = round( average( ranks ) )
write to consensus_board (source="community" when any community ranks exist; otherwise "seed")

Rules:
	â€¢	Dynasty: season must be null
	â€¢	Redraft: season required (e.g., 2025)
	â€¢	Equal weight for all consenting users at all times.

Endpoints:

GET /api/consensus?format=dynasty|redraft&season=2025&pos=WR
POST /api/consensus/rebuild { format, season? }   // admin: recompute consensus from user_ranks


â¸»

4) Fire (ğŸ”¥) badges â€” social only (no math)
	â€¢	Users can give ğŸ”¥ to a ranking set or profile; it increments fireScore for the recipient.
	â€¢	Fire only affects visibility UI (badges/leaderboards), not consensus weighting.

API:

POST /api/fire { toUserId, targetType, targetId }   // auth required; rate-limit per day
GET  /api/leaderboard/fire?limit=20                 // top ğŸ”¥ users

Display rules
	â€¢	If fireScore >= 50, show badge lvl 50ğŸ”¥; if >=5000, lvl 5000ğŸ”¥ (tiered).
	â€¢	Add glow style on usernames with high fireScore.

CSS (glow username)

/* tailwind-less example */
.username-hot {
  position: relative;
  text-shadow: 0 0 8px rgba(255, 111, 0, 0.6);
}
.username-hot::after {
  content: " ğŸ”¥";
}

React helper

export function Username({ name, fireScore }:{name:string;fireScore:number}) {
  const tier = fireScore >= 5000 ? 5000 : fireScore >= 500 ? 500 : fireScore >= 50 ? 50 : 0;
  const cls = tier ? "username-hot" : "";
  return <span className={cls}>{name}{tier ? ` â€” lvl ${tier}ğŸ”¥` : ""}</span>;
}


â¸»

5) Transparency page

Route: /consensus-transparency

Show:
	â€¢	â€œEqualâ€‘weight consensus â€” every consenting contributor counts as 1 vote.â€
	â€¢	Contributors count (number of consenting users with active ranks for the slice).
	â€¢	Top ğŸ”¥ users leaderboard (fun list; again, no influence on math).
	â€¢	Last rebuild timestamp and trigger (â€œmanualâ€ or cron).
	â€¢	Consent & withdrawal policy summary.

API:

GET /api/consensus/meta?format=...&season=...
// { contributors: number, lastUpdatedISO, equalWeight:true }


â¸»

6) Pages & routes
	â€¢	Your board (public): /experts/architect-j
	â€¢	Tabs: Dynasty / Redraft(2025)
	â€¢	Position chips: ALL, QB, RB, WR, TE
	â€¢	Header shows <Username /> with ğŸ”¥ level if any.
	â€¢	Consensus (public): /consensus (defaults to Dynasty)
	â€¢	/consensus/dynasty, /consensus/redraft?season=2025
	â€¢	Copy uses â€œOTC Consensusâ€ (not â€œRankingsâ€)
	â€¢	Compare (public): /compare/architect-j?format=dynasty&pos=WR
	â€¢	Columns: Player â€¢ Your Rank â€¢ OTC Consensus â€¢ Î” (consensus - yours)
	â€¢	Admin quick seed (already specâ€™d earlier): /admin/consensus + POST /api/consensus/shorthand

â¸»

7) Shorthand seeding (recap for v1.1)
	â€¢	For launch, Architect J is the only â€œeditor.â€
	â€¢	Command style (strict v1.1):

OTC consensus <POS><RANK> : <PLAYER NAME> (dynasty|2025 redraft)


	â€¢	Errors must be explicit; success must echo resolved target.

â¸»

8) Guardrails
	â€¢	Reject contributions from nonâ€‘consenting users.
	â€¢	Min account age (e.g., 7 days) or verified email to contribute ranks.
	â€¢	Basic troll detection (reject submissions with >N players missing or identical ranks).

â¸»

9) Acceptance
	â€¢	âœ… PATCH /api/profile/:username toggles consent.
	â€¢	âœ… Consensus rebuild uses only consenting users; equal weight.
	â€¢	âœ… Fire badge visible on hot users; doesnâ€™t affect consensus math.
	â€¢	âœ… /consensus-transparency clearly states equalâ€‘weight + consent rules.
	â€¢	âœ… At launch, consensus mirrors Architect Jâ€™s board 1:1; compare view shows Î”=0.

â¸»

10) Small UI touches
	â€¢	On Season HQ tiles, add: â€œView Architect J board â†’ /experts/architect-jâ€
	â€¢	On Consensus pages, add pill: â€œCompare to Architect Jâ€

â¸»

Optional (nice-to-have now, or later)
	â€¢	Cron job to rebuild consensus nightly.
	â€¢	Export/Import of user boards (CSV/JSON).
	â€¢	â€œPublish to Consensusâ€ button on a userâ€™s private board editor (writes to user_ranks if consent is ON).

â¸»

Final note (intent)
	â€¢	This system is static and humanâ€‘directed at launch. No autoâ€‘ingestion. It grows only when real users contribute voluntarily.

â¸»

Question for you, Tiber (from Lamar):

â€œDo you want me to also write the â€˜Consensus vs Your Rankingsâ€™ chart logic so itâ€™s ready to display the 1â€‘toâ€‘1 now and evolve later? Thatâ€™s the FantasyProsâ€‘style feature you mentioned.â€

If yes, Iâ€™ll send the chart spec (API shape + React component with Î” pills and sorting) right after this.