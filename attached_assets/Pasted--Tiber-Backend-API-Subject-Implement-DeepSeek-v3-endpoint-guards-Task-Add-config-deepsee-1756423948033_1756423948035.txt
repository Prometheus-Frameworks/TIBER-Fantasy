ğŸ‘‰ Tiber (Backend/API)

Subject: Implement DeepSeek v3 endpoint + guards

Task:

Add /config/deepseek.v3.weights.json with:

{
  "version": "3.0.0",
  "mode_defaults": {
    "dynasty": { "talent": 0.32, "role": 0.16, "context": 0.14, "durability": 0.10, "recency": 0.08, "spike": 0.10, "risk": 0.10 },
    "redraft": { "talent": 0.24, "role": 0.26, "context": 0.16, "durability": 0.08, "recency": 0.16, "spike": 0.08, "risk": 0.02 }
  },
  "tier_cutoffs": [96, 91, 86, 81, 76, 71],
  "guards": { "dry_run": true, "max_players": 1000, "require_sleeper_sync_ok": true, "allow_enrichment": true }
}


Create services/deepseekV3Service.ts (compute scores, bucket tiers, respect guards).

New route GET /api/rankings/deepseek/v3?mode=dynasty|redraft&league_id=...

Source players from sleeperSyncService (single source of truth).

Optional enrich via OASIS (team env).

Join Sleeper ADP if available â†’ add adp and delta_vs_adp.

Return { mode, count, data:[{rank, player_id, name, pos, team, age, tier, score, adp?, delta_vs_adp?}] }.

Validation: if require_sleeper_sync_ok and sync not ready â†’ 503.

Perf: paginate internally (cap with max_players), index/log as needed.

Smoke tests (curl):

curl "/api/rankings/deepseek/v3?mode=dynasty"
curl "/api/rankings/deepseek/v3?mode=redraft"


Expect 200, JSON with count>0, sorted by score desc, stable tiers.

ğŸ‘‰ Frontend (Tiber)

Subject: Ship /rankings/v3 UI

Task:

New page /rankings/v3 with toggle: Dynasty | Redraft.

Table cols: # | Player | Pos | Team | Age | Tier | Score | ADP | Î” vs ADP.

Fetch /api/rankings/deepseek/v3?mode=<toggle>.

Persist mode in URL (?mode=). Add skeleton state + empty-state.

Small â€œUpdated just nowâ€ badge (use response time or Date.now()).

ğŸ‘‰ Grok (Data/Compute)

Subject: Feed v3 inputs

Task:

Ensure sleeperSyncService exposes normalized players with fields used by v3:

player_id, name, pos, team, age

usage: routeRate, tgtShare, rushShare, rzTgtShare, glRushShare

talent proxies: talentScore, explosiveness, yakPerRec

recency/spike: last6wPerf, spikeGravity

risk: draftCapTier, injuryRisk, ageRisk

If a field is missing, set null (service clamps/sane defaults).

Provide adpMap[player_id] if available.

Done when: v3 endpoint computes without null pointer errors and returns 500+ players.

ğŸ‘‰ Claude (QA)

Subject: v3 launch checks

Task:

Response schema validation (keys present, score sorted desc).

Tier cutoffs respected; no negative scores; rank is 1..N.

ADP delta sanity (players with earlier ADP should often have small |Î”|).

3 spot checks/position: score math monotonic with talent/role tweaks (use mocked payload if needed).

Performance: <300ms p50.

Report: paste JSON snippets + p50/p95 timing + quick eye test top-20 per position.

ğŸƒ Runbook (fast)

Backend up

Add config + service + route.

Wire require_sleeper_sync_ok to existing sync health flag.

Deploy; verify:

GET /api/rankings/deepseek/v3?mode=dynasty â†’ 200, count>0.

Same for redraft.

Frontend

Add /rankings/v3 page with toggle + table.

Smoke in browser: switch modes, confirm re-fetch, rows resorted.

Sanity

Eyeball top-10 RB/WR/QB/TE each mode.

Check a few ADP deltas (edges show up, not chaotic).

Guardrails tonight

Leave dry_run=true (weâ€™re not overwriting any canonical tables).

Cap max_players=1000.

Log top risers/fallers by delta_vs_adp.

Flip tomorrow

If eye test good, set dry_run=false and (if desired) persist v3 snapshot to player_scores_v3 for history.

âœ… v3 Acceptance (green = live)

 API returns 200 with count >= 400, sorted by score desc.

 /rankings/v3 renders, toggles dynasty/redraft, persists mode in URL.

 Tiering matches cutoffs; no single-player Tier 1 unless warranted by scores.

 ADP deltas present when ADP exists.

 p50 < 300ms; p95 < 600ms on endpoint.

 QA eye test: top-20 per position look sane; no glaring mis-orders.