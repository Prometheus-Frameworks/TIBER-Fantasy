ğŸ”’ Guardrails (do these now)

1) Ban window.location.href in the codebase
	â€¢	ESLint rule:

// .eslintrc
{
  "rules": {
    "no-restricted-properties": [
      "error",
      { "object": "window", "property": "location", "message": "Use wouter setLocation() â€” no hard reloads." }
    ]
  }
}

2) Single navigation helper

// src/ui/router/nav.ts
import { useLocation } from "wouter";
export function useNav() {
  const [, setLocation] = useLocation();
  return (to: string, replace = false) =>
    setLocation(to, { replace });
}

Use everywhere:

const nav = useNav();
nav("/leagues", true);  // after login
nav(`/dashboard?leagueId=${id}`);  // on league select

3) Persist + deepâ€‘link
	â€¢	When a league is chosen: localStorage.setItem('leagueId', id)
	â€¢	In Dashboard, if no leagueId query, fall back to localStorage.getItem('leagueId'). If still missing, nav('/leagues', true).

4) Put the catchâ€‘all route last
wouter can be â€œfirst match wins.â€ Keep your * fallback at the bottom or it will shadow legit routes.

â¸»

ğŸ§ª Regression checklist (5â€‘min run)
	1.	Full flow
Home â†’ Connect Sleeper â†’ enter H4MMER â†’ â€œView All Leaguesâ€ â†’ /leagues list â†’ pick one â†’ /dashboard renders.
	2.	Back/forward buttons
From dashboard, hit Back â†’ returns to /leagues (no hard reload). Forward â†’ returns to dashboard.
	3.	Reload behavior
On /dashboard?leagueId=..., browser refresh keeps you on dashboard (no redirect to home). If query missing, it should load from localStorage and still render.
	4.	Direct deep link
Paste /dashboard?leagueId=<id> into a new tab â†’ dashboard loads. If invalid id, app sends you to /leagues.
	5.	No stray hard reloads
Global code search: "window.location" â†’ 0 matches.

â¸»

ğŸ” Tiny polish to avoid future faceplants

Leagues page: disable until loaded

<button disabled={!league.league_id} onClick={() => nav(`/dashboard?leagueId=${league.league_id}`)}>
  {league.name}
</button>

Dashboard: resilient team selection
We already fixed Team Not Found; keep the URLSearchParams new-instance pattern and only write when needed.

Telemetry (one liner)
Log route changes to see real user flow:

// in App root
useEffect(() => {
  console.log(JSON.stringify({ src:'router', path: location, ts: Date.now() }));
}, [location]);



Joe verdict: Joeâ€™s happy. This was a small-but-deadly SPA mistake, and now itâ€™s caged. If you want, Iâ€™ll draft a tiny PR adding the ESLint guard + useNav() helper so nobody reintroduces window.location.href again.