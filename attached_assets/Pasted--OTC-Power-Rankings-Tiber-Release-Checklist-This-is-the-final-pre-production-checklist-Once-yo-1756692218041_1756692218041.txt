ðŸš¦ OTC Power Rankings â€” Tiber Release Checklist

This is the final pre-production checklist. Once you tick every box, you have the green light to push the service live to the user.

âœ… Data Pipeline

 Sleeper Backfill
Run npm run bt:import:sleeper for 2024 â†’ expect ~9k rows in bt_week_points.

 FantasyPros ECR
Run npm run bt:scrape:ecr (Week 1, per-slice) â†’ expect bt_market_rank filled.
Any stragglers show up in bt_market_rank_unmatched.

âœ… Core Service

 DB Schema Applied
Confirm player_week_facts, power_ranks, bt_week_points, bt_market_rank exist.

 Nightly Recalc
Run npm run recalc:nightly â†’ power_ranks filled with OVERALL + per-pos (â‰ˆ500 players each).

 API Smoke Test

curl "http://localhost:8084/api/power/OVERALL?season=2025&week=1" | jq '.items[0:5]'


Response includes power_score + delta_w.

âœ… Event System

 Event Worker Online
Run npm run recalc:events in background.

 Test Event
Post QB_CHANGE:

curl -X POST http://localhost:8084/api/power/events \
  -H "content-type: application/json" \
  -d '{"event_type":"QB_CHANGE","scope":{"team":"NYG"}}'


Confirm WR/TE ranks shift immediately (unclamped).

âœ… Validation

 Run Validation
npm run validate â†’ expect weekly logs with rho/hit/drift metrics.

 Success Criteria

QB Ï â‰¥ 0.45 (hit â‰¥ 60%)

RB Ï â‰¥ 0.40 after tweak (hit â‰¥ 60%)

WR/TE Ï â‰¥ 0.40 (hit â‰¥ 60%)

Positive drift buckets (>=+10) outperform neutral/negative in both points and hit rates.

âœ… Config & Enhancements

 Weights Updated

RB availability = 0.13, usage = 0.37

QB environment = 0.30

Market anchor capped at 0.05

 Confidence Gating
Rookie/new role players capped at ~0.65 conf until 3 games of â‰¥50% snaps.

 Opponent/SOS Multiplier
Hook in place in scoring.ts (currently stubbed at 1.0).

 Aliases Resolver
players_aliases table exists, scraper checks it before unmatched log.

âœ… Ops / Deployment

 Cron Jobs Installed

Tue 03:00 â€” Sleeper backfill

Wed 20:30 â€” ECR scrape

Daily 03:30 â€” Nightly recalc

 Docs Present
/docs/DEPLOY.md includes cron examples + ops notes.

ðŸš€ Release Decision

Go Live when:

All boxes above ticked

Validation metrics at/above targets

API + Event worker smoke tests clean

At that point, the service is considered production-ready and Tiber can push it to the user.

ðŸ‘‰ Boss Man J says: Green light, Tiber â€” run the checklist, then push it.